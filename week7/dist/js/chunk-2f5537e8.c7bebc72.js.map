{"version":3,"sources":["webpack:///./src/views/admin/Orders.vue","webpack:///./src/components/admin/orderModal.vue","webpack:///./src/components/admin/orderModal.vue?1c9f","webpack:///./src/views/admin/Orders.vue?1e9b","webpack:///./src/components/admin/orderModal.vue?c864"],"names":["class","width","id","active","isLoading","orderList","order","key","create_at","user","name","email","total","is_paid","style","paidChange","type","openModal","length","page-info","pageInfo","getOrder","tempOrder","modifyOrder","ref","item","deleteOrder","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","for","role","colspan","orderInfo","disabled","autocomplete","checked","placeholder","tel","address","message","products","product","src","imageUrl","alt","title","qty","price","$emit","data","modal","props","Object","default","methods","this","show","hideModal","hide","watch","mounted","$refs","keyboard","render","__scopeId","total_pages","current_page","has_pre","has_next","components","pagination","orderModal","deleteModal","page","$http","get","then","response","success","orders","$moshaToast","showIcon","position","catch","error","console","log","action","JSON","parse","stringify","errorCount","setTimeout","editOrder","updateOrder","orderId","callback","put","delete","created"],"mappings":"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","file":"js/chunk-2f5537e8.c7bebc72.js","sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <loading :active=\"isLoading\"/>\n    <!-- Page Heading -->\n    <div class=\"d-sm-flex align-items-center justify-content-between mb-4\">\n      <h1 class=\"h3 mb-0 text-gray-800\"><i class=\"fas fa-shopping-cart\"></i> 訂單管理</h1>\n    </div>\n\n    <div class=\"row\">\n      <div class=\"col-lg-12\">\n        <div class=\"card shadow mb-4\">\n          <div class=\"card-header py-3\">\n            <h6 class=\"m-0 font-weight-bold text-primary\">訂單列表</h6>\n          </div>\n          <div class=\"card-body\">\n            <div class=\"table-responsive\">\n              <table class=\"table mt-4\">\n                <thead>\n                  <tr>\n                    <th width=\"20%\" class=\"text-center\">訂單編號</th>\n                    <th width=\"15%\">收件人姓名</th>\n                    <th width=\"15%\">收件人信箱</th>\n                    <th width=\"10%\" class=\"text-end\">金額</th>\n                    <th width=\"10%\" class=\"text-center\">付款狀態</th>\n                    <th width=\"8%\" class=\"text-center\">編輯</th>\n                    <th width=\"8%\" class=\"text-center\">刪除</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  <tr v-for=\"order in orderList\" :key=\"order.id\">\n                    <td class=\"text-center\">\n                      {{ order.create_at }}\n                    </td>\n                    <td>\n                      {{ order.user.name }}\n                    </td>\n                    <td>\n                      {{ order.user.email }}\n                    </td>\n                    <td class=\"text-end\">\n                      {{ order.total }}\n                    </td>\n                    <td class=\"text-center\">\n                      <span\n                        class=\"badge pointer\"\n                        :class=\"order.is_paid ? 'bg-success' : 'bg-secondary'\"\n                        style=\"font-size:1em;\"\n                        @click=\"paidChange(order)\"\n                      >\n                        {{ order.is_paid ? '已付款' : '未付款' }}\n                      </span>\n                    </td>\n                    <td class=\"text-center\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-sm btn-outline-success move\"\n                        @click=\"openModal('update', order)\"\n                      >\n                        編輯\n                      </button>\n                    </td>\n                    <td class=\"text-center\">\n                      <button\n                        type=\"button\"\n                        class=\"btn btn-sm btn-outline-danger move\"\n                        @click=\"openModal('delete', order)\"\n                      >\n                        刪除\n                      </button>\n                    </td>\n                  </tr>\n                </tbody>\n              </table>\n            </div>\n            <div class=\"text-center\">\n              <p>\n                目前有 <span id=\"productCount\">{{ orderList.length }}</span> 筆訂單\n              </p>\n            </div>\n            <pagination :page-info=\"pageInfo\" @page-change=\"getOrder\"></pagination>\n          </div>\n        </div>\n      </div>\n    </div>\n    <order-modal :order=\"tempOrder\" @modify-order=\"modifyOrder\" ref=\"orderModal\"></order-modal>\n    <delete-modal :item=\"tempOrder\" @confirm=\"deleteOrder\" ref=\"deleteModal\"></delete-modal>\n  </div>\n</template>\n\n<script>\nimport pagination from '@/components/admin/pagination.vue';\nimport orderModal from '@/components/admin/orderModal.vue';\nimport deleteModal from '@/components/admin/deleteModal.vue';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      orderList: [],\n      tempOrder: {\n        user: {},\n        products: [],\n      },\n      pageInfo: {\n        total_pages: 1,\n        current_page: 1,\n        has_pre: false,\n        has_next: false,\n      },\n    };\n  },\n  components: {\n    pagination,\n    orderModal,\n    deleteModal,\n  },\n  methods: {\n    getOrder(page = 1) {\n      this.isLoading = true;\n      this.$http\n        .get(\n          `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/orders?page=${page}`,\n        )\n        .then((response) => {\n          this.isLoading = false;\n          if (response.data.success) {\n            this.orderList = response.data.orders;\n            this.pageInfo = response.data.pagination;\n          } else {\n            this.$moshaToast(response.data.message, {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    openModal(action, order) {\n      switch (action) {\n        case 'update':\n          this.tempOrder = JSON.parse(JSON.stringify(order));\n          this.$refs.orderModal.openModal();\n          break;\n        case 'delete':\n          this.tempOrder = JSON.parse(JSON.stringify(order));\n          this.tempOrder.title = `訂單編號：${order.create_at}`;\n          this.$refs.deleteModal.openModal();\n          break;\n        default:\n          break;\n      }\n    },\n    modifyOrder() {\n      let errorCount = 0;\n\n      if (!this.tempOrder.user) {\n        errorCount += 1;\n        this.$moshaToast('請填寫收件人資訊', {\n          type: 'danger',\n          showIcon: true,\n          position: 'bottom-right',\n        });\n      } else {\n        if (!this.tempOrder.user.email) {\n          errorCount += 1;\n          setTimeout(() => {\n            this.$moshaToast('請填寫Email', {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n          }, 1);\n        }\n\n        if (!this.tempOrder.user.name) {\n          errorCount += 1;\n          setTimeout(() => {\n            this.$moshaToast('請填寫收件人名稱', {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n          }, 1);\n        }\n\n        if (!this.tempOrder.user.tel) {\n          errorCount += 1;\n          setTimeout(() => {\n            this.$moshaToast('請填寫收件人電話', {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n          }, 1);\n        }\n\n        if (!this.tempOrder.user.address) {\n          errorCount += 1;\n          setTimeout(() => {\n            this.$moshaToast('請填寫收件人地址', {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n          }, 1);\n        }\n      }\n\n      if (errorCount === 0) {\n        const order = {\n          data: {\n            user: this.tempOrder.user,\n            is_paid: this.tempOrder.is_paid,\n          },\n        };\n        this.editOrder(this.tempOrder.id, order, () => {\n          this.$refs.orderModal.hideModal();\n        });\n      }\n    },\n    paidChange(order) {\n      const updateOrder = {\n        data: {\n          is_paid: !order.is_paid,\n        },\n      };\n      this.editOrder(order.id, updateOrder);\n    },\n    editOrder(orderId, order, callback) {\n      this.isLoading = true;\n      this.$http\n        .put(\n          `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/order/${orderId}`,\n          order,\n        )\n        .then((response) => {\n          if (response.data.success) {\n            this.$moshaToast(response.data.message, {\n              type: 'success',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n            this.getOrder();\n          } else {\n            this.$moshaToast(response.data.message, {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n            this.isLoading = false;\n          }\n\n          if (callback) {\n            callback();\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n    deleteOrder(orderId) {\n      this.isLoading = true;\n      this.$http\n        .delete(\n          `${process.env.VUE_APP_API_URL}/api/${process.env.VUE_APP_API_PATH}/admin/order/${orderId}`,\n        )\n        .then((response) => {\n          if (response.data.success) {\n            this.$refs.deleteModal.hideModal();\n            this.$moshaToast(response.data.message, {\n              type: 'success',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n            this.getOrder();\n          } else {\n            this.$moshaToast(response.data.message, {\n              type: 'danger',\n              showIcon: true,\n              position: 'bottom-right',\n            });\n            this.isLoading = false;\n          }\n        })\n        .catch((error) => {\n          console.log(error);\n        });\n    },\n  },\n  created() {\n    this.getOrder();\n  },\n};\n</script>\n","<template>\n  <div\n    class=\"modal fade\"\n    id=\"orderModal\"\n    tabindex=\"-1\"\n    aria-labelledby=\"orderModalLabel\"\n    aria-hidden=\"true\"\n    ref=\"modal\"\n  >\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-primary text-white\">\n          <h5 class=\"modal-title\" id=\"orderModalLabel\">更新訂單資訊</h5>\n          <button\n            type=\"button\"\n            class=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          ></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"row\">\n            <div class=\"col-sm-12\">\n              <div class=\"row\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"name\" class=\"form-label\">訂單編號</label>\n                  <input\n                    id=\"name\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    v-model=\"orderInfo.create_at\"\n                    disabled\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <div class=\"mb-2\">付款狀態</div>\n                  <div class=\"btn-group\" role=\"group\" aria-label=\"Basic radio toggle button group\">\n                    <input\n                      type=\"radio\"\n                      class=\"btn-check\"\n                      name=\"btnradio\"\n                      id=\"is_paid\"\n                      autocomplete=\"off\"\n                      :checked=\"orderInfo.is_paid\"\n                      @click=\"orderInfo.is_paid = true\"\n                    />\n                    <label class=\"btn btn-outline-success\" for=\"is_paid\">已付款</label>\n\n                    <input\n                      type=\"radio\"\n                      class=\"btn-check\"\n                      name=\"btnradio\"\n                      id=\"not_paid\"\n                      autocomplete=\"off\"\n                      :checked=\"!orderInfo.is_paid\"\n                      @click=\"orderInfo.is_paid = false\"\n                    />\n                    <label class=\"btn btn-outline-secondary\" for=\"not_paid\">尚未付款</label>\n                  </div>\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"userEmail\" class=\"form-label\"\n                    >Email<span class=\"text-red\">&nbsp;*</span></label\n                  >\n                  <input\n                    id=\"userEmail\"\n                    type=\"email\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入Email\"\n                    v-model=\"orderInfo.user.email\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"userName\" class=\"form-label\"\n                    >收件人名稱<span class=\"text-red\">&nbsp;*</span></label\n                  >\n                  <input\n                    id=\"userName\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入收件人名稱\"\n                    v-model=\"orderInfo.user.name\"\n                  />\n                </div>\n              </div>\n              <div class=\"row\">\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"userTel\" class=\"form-label\"\n                    >收件人電話<span class=\"text-red\">&nbsp;*</span></label\n                  >\n                  <input\n                    id=\"userTel\"\n                    type=\"tel\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入收件人電話\"\n                    v-model=\"orderInfo.user.tel\"\n                  />\n                </div>\n                <div class=\"mb-3 col-md-6\">\n                  <label for=\"userAddress\" class=\"form-label\"\n                    >收件人地址<span class=\"text-red\">&nbsp;*</span></label\n                  >\n                  <input\n                    id=\"userAddress\"\n                    type=\"text\"\n                    class=\"form-control\"\n                    placeholder=\"請輸入收件人地址\"\n                    v-model=\"orderInfo.user.address\"\n                  />\n                </div>\n              </div>\n              <div class=\"mb-3\">\n                <label for=\"message\" class=\"form-label\">留言</label>\n                <textarea\n                  id=\"message\"\n                  type=\"text\"\n                  class=\"form-control\"\n                  v-model=\"orderInfo.message\"\n                  disabled\n                ></textarea>\n              </div>\n              <hr />\n              <div class=\"table-responsive\">\n                商品明細\n                <table class=\"table product-list\">\n                  <thead>\n                    <tr>\n                      <th width=\"10%\" class=\"text-center\">商品圖片</th>\n                      <th width=\"15%\">品名</th>\n                      <th width=\"15%\">數量</th>\n                      <th width=\"10%\" class=\"text-end\">單價</th>\n                      <th width=\"10%\" class=\"text-end\">總價</th>\n                    </tr>\n                  </thead>\n                  <tbody>\n                    <tr v-for=\"(product, id) in orderInfo.products\" :key=\"id\">\n                      <td class=\"text-center\">\n                        <img :src=\"product.product.imageUrl\" :alt=\"product.product.title\" />\n                      </td>\n                      <td>\n                        {{ product.product.title }}\n                      </td>\n                      <td>\n                        {{ product.qty }}\n                      </td>\n                      <td class=\"text-end\">\n                        {{ product.product.price }}\n                      </td>\n                      <td class=\"text-end\">\n                        {{ product.total }}\n                      </td>\n                    </tr>\n                  </tbody>\n                  <tfoot>\n                    <tr>\n                      <td colspan=\"4\" class=\"text-end\">總計</td>\n                      <td class=\"text-end\">{{ orderInfo.total }}</td>\n                    </tr>\n                  </tfoot>\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-secondary\" data-bs-dismiss=\"modal\">\n            關閉\n          </button>\n          <button type=\"button\" class=\"btn btn-primary\" @click=\"$emit('modify-order')\">\n            送出\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Modal from 'bootstrap/js/dist/modal';\n\nexport default {\n  data() {\n    return {\n      modal: '',\n      orderInfo: {\n        user: {},\n        products: {},\n      },\n    };\n  },\n  props: {\n    order: {\n      type: Object,\n      default() {\n        return {\n          user: {},\n          products: {},\n        };\n      },\n    },\n  },\n  methods: {\n    openModal() {\n      this.modal.show();\n    },\n    hideModal() {\n      this.modal.hide();\n    },\n  },\n  watch: {\n    order() {\n      this.orderInfo = this.order;\n      if (!this.orderInfo.user) {\n        this.orderInfo.user = {};\n      }\n\n      if (!this.order.products) {\n        this.orderInfo.products = {};\n      }\n    },\n  },\n  mounted() {\n    this.modal = new Modal(this.$refs.modal, {\n      keyboard: false,\n    });\n  },\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.product-list {\n  img {\n    max-height: 60px;\n  }\n\n  td {\n    vertical-align: middle;\n  }\n}\n</style>\n","import { render } from \"./orderModal.vue?vue&type=template&id=02b7dbc4&scoped=true\"\nimport script from \"./orderModal.vue?vue&type=script&lang=js\"\nexport * from \"./orderModal.vue?vue&type=script&lang=js\"\n\nimport \"./orderModal.vue?vue&type=style&index=0&id=02b7dbc4&lang=scss&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-02b7dbc4\"\n\nexport default script","import { render } from \"./Orders.vue?vue&type=template&id=351f54c6\"\nimport script from \"./Orders.vue?vue&type=script&lang=js\"\nexport * from \"./Orders.vue?vue&type=script&lang=js\"\nscript.render = render\n\nexport default script","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./orderModal.vue?vue&type=style&index=0&id=02b7dbc4&lang=scss&scoped=true\""],"sourceRoot":""}